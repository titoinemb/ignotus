{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///media/a/Dev/ignotus/app/src/app/hooks/useItem.ts"],"sourcesContent":["'use client';\nimport { useEffect, useState } from 'react';\nimport { ItemState } from \"@types\";\nimport { useLocation } from 'react-router-dom';\nimport { findInTable } from \"../functions\";\n\nexport const useItem = () => {\n  const [state, setState] = useState<ItemState>({\n    loading: true,\n    error: false,\n    data: null,\n    saisonsSelect: [],\n    castingsSelect: [],\n    wishlistOption: 1,\n    saisons: 0,\n    activeContent: \"saisons\",\n  });\n  const contentBtn = (where: string) => setState({ ...state, activeContent: where });\n  const handleChange = (event: React.ChangeEvent<HTMLSelectElement>) => setState({ ...state, saisons: parseInt(event.target.value) });\n\n  const location = useLocation();\n  const params = new URLSearchParams(location.search);\n  const queryParams: { [key: string]: string } = {};\n\n  params.forEach((value, key) => queryParams[key] = value);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch('http://localhost:8080/item', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },\n          body: JSON.stringify({ table: queryParams.t, id: queryParams.i }),\n        });\n\n        if (!response.ok) throw new Error('Failed to fetch item');\n\n        const datarep = await response.json();\n\n        if (!datarep) throw new Error('No data received');\n\n        let wishlistOption = 1;\n\n        if (localStorage.getItem('session')) {\n          const response2 = await fetch('http://localhost:8080/account/datas', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },\n            body: JSON.stringify({ username: localStorage.getItem('username'), session: localStorage.getItem('session') }),\n          });\n\n          if (!response2.ok) throw new Error('Failed to fetch account data');\n\n          const datarep2 = await response2.json();\n\n          if (!datarep2 || datarep2.message !== \"1\") throw new Error('Invalid account data');\n\n          const wishlist = datarep2.datas.wishlist;\n\n          if (findInTable(wishlist, { table: queryParams.t, id: queryParams.i })) {\n            wishlistOption = 2;\n          };\n        };\n\n        if (!datarep.data.saisons) {\n          setState(prevState => ({ ...prevState, activeContent: \"castings\" }));\n        };\n\n        setState(prevState => ({\n          ...prevState,\n          data: datarep,\n          castingsSelect: datarep.data.person,\n          saisonsSelect: datarep.data.saisons,\n          wishlistOption,\n          loading: false\n        }));\n      } catch (error) {\n        setState(prevState => ({ ...prevState, error: true, loading: false }));\n      };\n    };\n\n    fetchData();\n  }, [queryParams.i, queryParams.t]);\n\n  return {\n    ...state,\n    contentBtn,\n    handleChange,\n    queryParams\n  };\n};"],"names":[],"mappings":";;;;AACA;AAEA;AACA;AAAA;AAJA;;;;AAMO,MAAM,UAAU;IACrB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAY;QAC5C,SAAS;QACT,OAAO;QACP,MAAM;QACN,eAAe,EAAE;QACjB,gBAAgB,EAAE;QAClB,gBAAgB;QAChB,SAAS;QACT,eAAe;IACjB;IACA,MAAM,aAAa,CAAC,QAAkB,SAAS;YAAE,GAAG,KAAK;YAAE,eAAe;QAAM;IAChF,MAAM,eAAe,CAAC,QAAgD,SAAS;YAAE,GAAG,KAAK;YAAE,SAAS,SAAS,MAAM,MAAM,CAAC,KAAK;QAAE;IAEjI,MAAM,WAAW,IAAA,sKAAW;IAC5B,MAAM,SAAS,IAAI,gBAAgB,SAAS,MAAM;IAClD,MAAM,cAAyC,CAAC;IAEhD,OAAO,OAAO,CAAC,CAAC,OAAO,MAAQ,WAAW,CAAC,IAAI,GAAG;IAElD,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,8BAA8B;oBACzD,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;wBAAoB,UAAU;oBAAmB;oBAC5E,MAAM,KAAK,SAAS,CAAC;wBAAE,OAAO,YAAY,CAAC;wBAAE,IAAI,YAAY,CAAC;oBAAC;gBACjE;gBAEA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;gBAElC,MAAM,UAAU,MAAM,SAAS,IAAI;gBAEnC,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;gBAE9B,IAAI,iBAAiB;gBAErB,IAAI,aAAa,OAAO,CAAC,YAAY;oBACnC,MAAM,YAAY,MAAM,MAAM,uCAAuC;wBACnE,QAAQ;wBACR,SAAS;4BAAE,gBAAgB;4BAAoB,UAAU;wBAAmB;wBAC5E,MAAM,KAAK,SAAS,CAAC;4BAAE,UAAU,aAAa,OAAO,CAAC;4BAAa,SAAS,aAAa,OAAO,CAAC;wBAAW;oBAC9G;oBAEA,IAAI,CAAC,UAAU,EAAE,EAAE,MAAM,IAAI,MAAM;oBAEnC,MAAM,WAAW,MAAM,UAAU,IAAI;oBAErC,IAAI,CAAC,YAAY,SAAS,OAAO,KAAK,KAAK,MAAM,IAAI,MAAM;oBAE3D,MAAM,WAAW,SAAS,KAAK,CAAC,QAAQ;oBAExC,IAAI,IAAA,qJAAW,EAAC,UAAU;wBAAE,OAAO,YAAY,CAAC;wBAAE,IAAI,YAAY,CAAC;oBAAC,IAAI;wBACtE,iBAAiB;oBACnB;;gBACF;;gBAEA,IAAI,CAAC,QAAQ,IAAI,CAAC,OAAO,EAAE;oBACzB,SAAS,CAAA,YAAa,CAAC;4BAAE,GAAG,SAAS;4BAAE,eAAe;wBAAW,CAAC;gBACpE;;gBAEA,SAAS,CAAA,YAAa,CAAC;wBACrB,GAAG,SAAS;wBACZ,MAAM;wBACN,gBAAgB,QAAQ,IAAI,CAAC,MAAM;wBACnC,eAAe,QAAQ,IAAI,CAAC,OAAO;wBACnC;wBACA,SAAS;oBACX,CAAC;YACH,EAAE,OAAO,OAAO;gBACd,SAAS,CAAA,YAAa,CAAC;wBAAE,GAAG,SAAS;wBAAE,OAAO;wBAAM,SAAS;oBAAM,CAAC;YACtE;;QACF;QAEA;IACF,GAAG;QAAC,YAAY,CAAC;QAAE,YAAY,CAAC;KAAC;IAEjC,OAAO;QACL,GAAG,KAAK;QACR;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///media/a/Dev/ignotus/app/src/app/components/features/Item.tsx"],"sourcesContent":["import '../../styles/item.scss';\r\nimport { Loading } from '../layout';\r\nimport { formatDate, wishlist } from \"../../functions\";\r\nimport { Props } from '@types';\r\nimport { Error404 } from \".\"\r\nimport { useItem } from \"../../hooks/useItem\";\r\n\r\nexport const Item: React.FC<Props> = ({ json, lang }) => {\r\n  const { activeContent, castingsSelect, contentBtn, data, error, handleChange, loading, saisons, queryParams, saisonsSelect, wishlistOption } = useItem();\r\n\r\n  if (loading) return <Loading />;\r\n  if (error === true || data === null) return <Error404 lang={lang} json={json} />;\r\n\r\n  return (\r\n    <div className='item'>\r\n      <div className=\"top\">\r\n        <div className=\"background\">\r\n          <div className=\"image\">\r\n            <img src={data.data.picture} alt=\"background\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"info\">\r\n          <div className=\"image\">\r\n            <img src={data.data.picture} alt=\"pic\" />\r\n          </div>\r\n          <div className=\"txt\">\r\n            <div className=\"title\">{data.data.data[lang].title}</div>\r\n            <div className=\"plus\">\r\n              <ul>\r\n                <li>\r\n                  <div className='note'>{data.data.note}/10</div>\r\n                </li>\r\n                <li>\r\n                  <div id='linkId' className=\"genre\">{json.genres[data.data.genres[0]]}</div>\r\n                </li>\r\n                <li>\r\n                  <div id='linkId'className=\"genre\">{json.genres[data.data.genres[1]]}</div>\r\n                </li>\r\n                <li>\r\n                  <div id='linkId' className=\"genre\">{json.genres[data.data.genres[2]]}</div>\r\n                </li>\r\n                <li>\r\n                  <div className=\"time\">{(data.data.saisons && Array.isArray(data.data.saisons) ? (`${data.data.saisons.length} saisons`) : (data.data.time))}</div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"description\">{data.data.data[lang].description}</div>\r\n            <div className=\"btn\">\r\n              <button\r\n                id=\"linkId\"\r\n                onClick={() => {\r\n                  const t = encodeURIComponent(queryParams?.t ?? \"\");\r\n                  const id = encodeURIComponent(data?.data?._id.$oid ?? \"\");\r\n                  const suffix = data?.data?.[0]?.saisons ? \"&e=0\" : \"\";\r\n                  const suffix2 = data?.data?.[0]?.saisons ? \"&s=0\" : \"\";\r\n                  window.location.href = `/watch?t=${t}&i=${id}${suffix + suffix2}`;\r\n                }}\r\n              >\r\n                {json.item.play}\r\n              </button>\r\n              {localStorage.getItem('session') && (\r\n              <button id=\"linkId\" className='wish' onClick={() => { wishlist(queryParams.t, queryParams.i); }}>\r\n                <svg id='check' style={{ display: wishlistOption === 2 ? \"flex\" : \"none\" }} xmlns=\"http://www.w3.org/2000/svg\" width=\"22px\" height=\"22px\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                  <g>\r\n                    <path id=\"Vector\" d=\"M7 12L11.9497 16.9497L22.5572 6.34326M2.0498 12.0503L6.99955 17M17.606 6.39355L12.3027 11.6969\" stroke=\"#fff\" />\r\n                  </g>\r\n                </svg>\r\n                {json.item.btn3}</button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"bottom\">\r\n        <div className=\"btns\">\r\n          <ul>\r\n            <li id='saisons' style={{ display: data.data?.saisons ? \"flex\" : \"none\" }}>\r\n              <button onClick={() => { contentBtn(\"saisons\") }}>{json.item.btn1}</button>\r\n            </li>\r\n            <li className='li'>\r\n              <button onClick={() => { contentBtn(\"castings\") }}>{json.item.btn4}</button>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div className=\"content\">\r\n          <div id=\"episodesContent\" style={{ display: data.data?.saisons ? activeContent === \"saisons\" ? \"block\" : \"none\" : \"none\" }}>\r\n            <select name=\"saisons\" id=\"saisonsSelect\" onChange={handleChange}>\r\n              <>\r\n                {saisonsSelect?.map((item, idx) => {\r\n                  return (\r\n                    <option key={idx} value={idx}>{item.name}</option>\r\n                  );\r\n                })}\r\n              </>\r\n            </select>\r\n            <div className=\"episodes\">\r\n              <>\r\n                {saisonsSelect?.[saisons]?.episode?.map((episode: any, i: number) => {\r\n                  if (!episode) return null;\r\n                  const targetI = data?.data?._id.$oid;\r\n                  if (!targetI) return null;\r\n\r\n                  return (\r\n                    <div\r\n                      className=\"episode\"\r\n                      key={i}\r\n                      onClick={() => {\r\n                        window.location.href = `/watch/?t=0&i=${targetI}&s=0&e=${i}&s=${saisons}`;\r\n                      }}\r\n                      style={{ cursor: \"pointer\" }}\r\n                    >\r\n                      <div className=\"image\">\r\n                        {episode.picture && <img src={episode.picture} alt=\"\" />}\r\n                      </div>\r\n                      <div className=\"info\">\r\n                        <div className=\"list\">\r\n                          {episode.time} - {formatDate(episode.date)}\r\n                        </div>\r\n                        <div className=\"title\">{episode.data?.[lang]?.title}</div>\r\n                        <p className=\"description\">{episode.data?.[lang]?.description}</p>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </>\r\n            </div>\r\n          </div>\r\n          <div id=\"castingsContent\" className=\"castingscontent\" style={{ display: activeContent === \"castings\" ? \"flex\" : \"none\" }}>\r\n            <ul>\r\n              <>\r\n                {castingsSelect.map((item, idx) => (\r\n                  <li key={idx}>\r\n                    <div\r\n                      id=\"linkId\"\r\n                      className=\"similar\"\r\n                      onClick={() => (window.location.href = item.link)}\r\n                      style={{ cursor: \"pointer\" }}\r\n                    >\r\n                      <div className=\"image\">\r\n                        <img className=\"cast\" src={item.picture} alt=\"cover\" />\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                ))}\r\n              </>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div >\r\n    </div >\r\n  );\r\n};"],"names":[],"mappings":"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"}}]
}