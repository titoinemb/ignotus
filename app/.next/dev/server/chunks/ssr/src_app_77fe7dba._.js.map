{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///media/a/Dev/ignotus/app/src/app/hooks/useSeach.ts"],"sourcesContent":["'use client';\nimport { useEffect, useState } from 'react';\nimport { SearchSate } from \"@types\";\nimport { useLocation } from 'react-router-dom';\n\nexport const useSearch = () => {\n  const [state, setState] = useState<SearchSate>({\n    loading: true,\n    error: false,\n    listBase: [],\n  });\n\n  let location = useLocation();\n  \n  useEffect(() => {\n    let params = new URLSearchParams(location.search);\n    let queryParams: { [key: string]: string } = {};\n    let typingTimer: NodeJS.Timeout;\n\n    params.forEach((value, key) => {\n      queryParams[key] = value;\n    });\n\n    var query: string;\n\n    if (!queryParams.query) {\n      const charCode = Math.floor(Math.random() * 26) + 97;\n      query = String.fromCharCode(charCode);\n    } else {\n      query = queryParams.query;\n    };\n\n    const fetchData = async (query1: string) => {\n      try {\n        const response = await fetch('http://localhost:8080/search', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },\n          body: JSON.stringify({ search: query1 }),\n        });\n\n        if (!response.ok) {\n          return setState(prevState => ({ ...prevState, error: true }));\n        };\n\n        const datarep = await response.json();\n\n        if (!datarep) {\n          return setState(prevState => ({ ...prevState, error: true }));\n        };\n\n        await setState(prevState => ({ ...prevState, listBase: datarep.data }));\n      } catch (error) {\n        setState(prevState => ({ ...prevState, error: true }));\n      } finally {\n        setState(prevState => ({ ...prevState, loading: false }));\n      };\n    };\n\n    fetchData(query);\n\n    function onUserTyping() {\n      clearTimeout(typingTimer);\n\n      typingTimer = setTimeout(() => {\n        let inputElement = document.getElementById('searchQuery') as HTMLInputElement | null;\n\n        if (inputElement) {\n          let query2 = inputElement.value.trim();\n\n          if (query2.length === 0) return;\n\n          return fetchData(query2);\n        };\n      }, 1000);\n    };\n\n    setTimeout(() => {\n      let inputElement = document.getElementById('searchQuery') as HTMLInputElement;\n\n      if (inputElement) {\n        return inputElement.addEventListener('input', onUserTyping);\n      };\n    }, 1000);\n\n  }, [location.search]);\n\n  return state;\n};"],"names":[],"mappings":";;;;AACA;AAEA;AAHA;;;AAKO,MAAM,YAAY;IACvB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAa;QAC7C,SAAS;QACT,OAAO;QACP,UAAU,EAAE;IACd;IAEA,IAAI,WAAW,IAAA,sKAAW;IAE1B,IAAA,kNAAS,EAAC;QACR,IAAI,SAAS,IAAI,gBAAgB,SAAS,MAAM;QAChD,IAAI,cAAyC,CAAC;QAC9C,IAAI;QAEJ,OAAO,OAAO,CAAC,CAAC,OAAO;YACrB,WAAW,CAAC,IAAI,GAAG;QACrB;QAEA,IAAI;QAEJ,IAAI,CAAC,YAAY,KAAK,EAAE;YACtB,MAAM,WAAW,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,MAAM;YAClD,QAAQ,OAAO,YAAY,CAAC;QAC9B,OAAO;YACL,QAAQ,YAAY,KAAK;QAC3B;;QAEA,MAAM,YAAY,OAAO;YACvB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,gCAAgC;oBAC3D,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;wBAAoB,UAAU;oBAAmB;oBAC5E,MAAM,KAAK,SAAS,CAAC;wBAAE,QAAQ;oBAAO;gBACxC;gBAEA,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,OAAO,SAAS,CAAA,YAAa,CAAC;4BAAE,GAAG,SAAS;4BAAE,OAAO;wBAAK,CAAC;gBAC7D;;gBAEA,MAAM,UAAU,MAAM,SAAS,IAAI;gBAEnC,IAAI,CAAC,SAAS;oBACZ,OAAO,SAAS,CAAA,YAAa,CAAC;4BAAE,GAAG,SAAS;4BAAE,OAAO;wBAAK,CAAC;gBAC7D;;gBAEA,MAAM,SAAS,CAAA,YAAa,CAAC;wBAAE,GAAG,SAAS;wBAAE,UAAU,QAAQ,IAAI;oBAAC,CAAC;YACvE,EAAE,OAAO,OAAO;gBACd,SAAS,CAAA,YAAa,CAAC;wBAAE,GAAG,SAAS;wBAAE,OAAO;oBAAK,CAAC;YACtD,SAAU;gBACR,SAAS,CAAA,YAAa,CAAC;wBAAE,GAAG,SAAS;wBAAE,SAAS;oBAAM,CAAC;YACzD;;QACF;QAEA,UAAU;QAEV,SAAS;YACP,aAAa;YAEb,cAAc,WAAW;gBACvB,IAAI,eAAe,SAAS,cAAc,CAAC;gBAE3C,IAAI,cAAc;oBAChB,IAAI,SAAS,aAAa,KAAK,CAAC,IAAI;oBAEpC,IAAI,OAAO,MAAM,KAAK,GAAG;oBAEzB,OAAO,UAAU;gBACnB;;YACF,GAAG;QACL;;QAEA,WAAW;YACT,IAAI,eAAe,SAAS,cAAc,CAAC;YAE3C,IAAI,cAAc;gBAChB,OAAO,aAAa,gBAAgB,CAAC,SAAS;YAChD;;QACF,GAAG;IAEL,GAAG;QAAC,SAAS,MAAM;KAAC;IAEpB,OAAO;AACT"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///media/a/Dev/ignotus/app/src/app/components/features/Search.tsx"],"sourcesContent":["import React from 'react';\r\nimport '../../styles/search.scss'\r\nimport { Loading, Error500 } from '../layout';\r\nimport { Props } from '@types';\r\nimport { useSearch } from \"../../hooks/useSeach\";\r\n\r\nexport const Search: React.FC<Props> = ({json, lang}) => {\r\n  const { error, listBase, loading } = useSearch();\r\n\r\n  if (loading) return <Loading />;\r\n  if (error === true) return <Error500 lang={lang} json={json} />;\r\n\r\n  return (\r\n    <div className='search'>\r\n      <div className=\"top\">\r\n        <div className=\"title\">{json.search.title}</div>\r\n        <div className=\"searching\">\r\n          <input type=\"text\" id='searchQuery' placeholder={json.search.input} />\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" fill=\"gray\" height=\"17px\" width=\"17px\" version=\"1.1\" id=\"Layer_1\" viewBox=\"0 0 512 512\" xmlSpace=\"preserve\"><g><g><path id=\"search\" d=\"M508.255,490.146l-128-128c-0.06-0.06-0.137-0.077-0.196-0.128c34.193-38.434,55.142-88.917,55.142-144.418    c0-120.175-97.425-217.6-217.6-217.6S0.001,97.425,0.001,217.6s97.425,217.6,217.6,217.6c55.501,0,105.975-20.949,144.418-55.151    c0.06,0.06,0.077,0.137,0.128,0.196l128,128c2.5,2.509,5.777,3.755,9.054,3.755s6.554-1.246,9.054-3.746    C513.247,503.253,513.247,495.147,508.255,490.146z M217.601,409.6c-105.865,0-192-86.135-192-192s86.135-192,192-192    s192,86.135,192,192S323.466,409.6,217.601,409.6z\"></path></g></g></svg>\r\n        </div>\r\n      </div>\r\n      <div className=\"mid\">\r\n        <ul id=\"midList\">\r\n          <>\r\n            {listBase.map((item) => {\r\n              const t = item.saisons ? \"series\" : \"movies\";\r\n              return (\r\n                <li key={item._id.$oid}>\r\n                  <div\r\n                    className=\"linkId\"\r\n                    id={item._id.$oid}\r\n                    onClick={() => {\r\n                      window.location.href = `/item?t=${t}&i=${item._id.$oid}`;\r\n                    }}\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === \"Enter\" || e.key === \" \") {\r\n                        window.location.href = `/item?t=${t}&i=${item._id.$oid}`;\r\n                      }\r\n                    }}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  >\r\n                    <div className=\"image\">\r\n                      <div className=\"image2\">\r\n                        <img src={item.minipicture} alt=\"logo\" />\r\n                      </div>\r\n                      <img src={item.picture} alt=\"cover\" />\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              );\r\n            })}\r\n          </>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":";;;;;AAEA;AAEA;;;;;AAEO,MAAM,SAA0B,CAAC,EAAC,IAAI,EAAE,IAAI,EAAC;IAClD,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,IAAA,4IAAS;IAE9C,IAAI,SAAS,qBAAO,8OAAC,sJAAO;;;;;IAC5B,IAAI,UAAU,MAAM,qBAAO,8OAAC,uJAAQ;QAAC,MAAM;QAAM,MAAM;;;;;;IAEvD,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAAS,KAAK,MAAM,CAAC,KAAK;;;;;;kCACzC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,MAAK;gCAAO,IAAG;gCAAc,aAAa,KAAK,MAAM,CAAC,KAAK;;;;;;0CAClE,8OAAC;gCAAI,OAAM;gCAA6B,YAAW;gCAA+B,MAAK;gCAAO,QAAO;gCAAO,OAAM;gCAAO,SAAQ;gCAAM,IAAG;gCAAU,SAAQ;gCAAc,UAAS;0CAAW,cAAA,8OAAC;8CAAE,cAAA,8OAAC;kDAAE,cAAA,8OAAC;4CAAK,IAAG;4CAAS,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAG5N,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,IAAG;8BACL,cAAA;kCACG,SAAS,GAAG,CAAC,CAAC;4BACb,MAAM,IAAI,KAAK,OAAO,GAAG,WAAW;4BACpC,qBACE,8OAAC;0CACC,cAAA,8OAAC;oCACC,WAAU;oCACV,IAAI,KAAK,GAAG,CAAC,IAAI;oCACjB,SAAS;wCACP,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,KAAK,GAAG,CAAC,IAAI,EAAE;oCAC1D;oCACA,WAAW,CAAC;wCACV,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK;4CACtC,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,KAAK,GAAG,CAAC,IAAI,EAAE;wCAC1D;oCACF;oCACA,OAAO;wCAAE,QAAQ;oCAAU;8CAE3B,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDAAI,KAAK,KAAK,WAAW;oDAAE,KAAI;;;;;;;;;;;0DAElC,8OAAC;gDAAI,KAAK,KAAK,OAAO;gDAAE,KAAI;;;;;;;;;;;;;;;;;+BAlBzB,KAAK,GAAG,CAAC,IAAI;;;;;wBAuB1B;;;;;;;;;;;;;;;;;;AAMZ"}}]
}