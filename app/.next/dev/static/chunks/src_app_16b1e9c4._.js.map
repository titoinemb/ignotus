{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///media/a/Dev/ignotus/app/src/app/hooks/useSubTitle.ts"],"sourcesContent":["'use client';\nimport { useEffect, useState } from 'react';\nimport { parseSrt } from \"../functions\";\nimport { SubtitlesState } from \"@types\";\n\nexport const useSubtitles = (srt: string | null | undefined, srtUrl: string | null | undefined, videoId: string, offset: number) => {\n  const [state, setState] = useState<SubtitlesState>({\n    cues: [],\n    activeText: null,\n    loading: true,\n    error: false,\n  });\n\n  const shouldShowOverlay = srt !== null && srtUrl !== null;\n\n  useEffect(() => {\n    let cancelled = false;\n\n    const loadCues = async () => {\n      if (!shouldShowOverlay) {\n        return setState({ cues: [], activeText: null, loading: false, error: false });\n      };\n\n      if (srt) {\n        return setState({ ...state, cues: parseSrt(srt), loading: false });\n      };\n\n      if (srtUrl) {\n        try {\n          let res = await fetch(srtUrl);\n\n          if (!res.ok) return setState({ ...state, cues: [], loading: false, error: true });\n            \n          let txt = await res.text();\n\n          if (!cancelled) return setState({ ...state, cues: parseSrt(txt), loading: false });\n        } catch (error) {\n          if (!cancelled) return setState({ ...state, cues: [], loading: false, error: true });\n        };\n      };\n    };\n\n    loadCues();\n    return () => { cancelled = true; };\n  }, [srt, srtUrl, shouldShowOverlay, state]);\n\n  useEffect(() => {\n    const video = document.getElementById(videoId) as HTMLVideoElement | null;\n    if (!video) {\n      console.warn('Video element not found:', videoId);\n      return;\n    };\n\n    if (!shouldShowOverlay || state.cues.length === 0) return setState(prevState => ({ ...prevState, activeText: null }));\n\n    let raf = 0;\n    const updateActiveText = () => {\n      const currentTime = (video.currentTime || 0) + offset;\n      const cue = state.cues.find(c => currentTime >= c.start && currentTime <= c.end);\n      setState(prevState => ({ ...prevState, activeText: cue ? cue.text : null }));\n      raf = requestAnimationFrame(updateActiveText);\n    };\n\n    raf = requestAnimationFrame(updateActiveText);\n    return () => cancelAnimationFrame(raf);\n  }, [videoId, state.cues, offset, shouldShowOverlay]);\n\n  return { activeText: state.activeText };\n};"],"names":["c","_c","useEffect","useState","parseSrt","SubtitlesState","useSubtitles","srt","srtUrl","videoId","offset","$","$i","Symbol","for","t0","cues","activeText","loading","error","state","setState","shouldShowOverlay","t1","t2","cancelled","loadCues","res","fetch","ok","txt","text","t3","t4","video","document","getElementById","HTMLVideoElement","console","warn","length","_temp","raf","updateActiveText","currentTime","cue","find","start","end","prevState_0","prevState","requestAnimationFrame","cancelAnimationFrame","t5"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///media/a/Dev/ignotus/app/src/app/components/layout/SubTitle.tsx"],"sourcesContent":["import React from 'react';\r\nimport { SubTitleProps } from \"@types\";\r\nimport { sanitizeSubtitleHtml } from \"../../functions\";\r\nimport { useSubtitles } from \"../../hooks/useSubTitle\";\r\nimport \"../../styles/subTitle.scss\";\r\n\r\nexport const SubTitle: React.FC<SubTitleProps> = ({videoId, srt, srtUrl, offset = 0, className}) => {\r\n  const { activeText } = useSubtitles(srt, srtUrl, videoId, offset);\r\n\r\n  return (\r\n    <div\r\n      aria-live=\"polite\"\r\n      className={className}\r\n      style={{\r\n        position: 'absolute',\r\n        left: 0,\r\n        right: 0,\r\n        bottom: '6%',\r\n        pointerEvents: 'none',\r\n        textAlign: 'center',\r\n        padding: '0 1rem',\r\n      }}\r\n    >\r\n      {activeText && (\r\n        <div\r\n          style={{\r\n            display: 'inline-block',\r\n            background: 'rgba(0,0,0,0.7)',\r\n            color: '#fff',\r\n            padding: '6px 10px',\r\n            borderRadius: 6,\r\n            whiteSpace: 'pre-wrap',\r\n            lineHeight: 1.2,\r\n            fontSize: 16,\r\n          }}\r\n          dangerouslySetInnerHTML={{ __html: sanitizeSubtitleHtml(activeText) }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};"],"names":["React","SubTitleProps","sanitizeSubtitleHtml","useSubtitles","SubTitle","FC","t0","$","_c","$i","Symbol","for","videoId","srt","srtUrl","offset","t1","className","undefined","activeText","t2","position","left","right","bottom","pointerEvents","textAlign","padding","t3","display","background","color","borderRadius","whiteSpace","lineHeight","fontSize","__html","t4"],"mappings":";;;;;;AAEA,SAASE,oBAAoB,QAAQ,iBAAiB;;AACtD,SAASC,YAAY,QAAQ,yBAAyB;;;;;;;AAG/C,kBAA0CG,EAAA;;IAAA,MAAAC,CAAA,OAAAC,gLAAA,EAAA;IAAA,IAAAD,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAE,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAF,CAAA,CAAAE,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAJ,CAAA,CAAA,EAAA,GAAA;IAAA;IAAC,MAAA,EAAAK,OAAA,EAAAC,GAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,EAAA,EAAAC,SAAAA,EAAA,GAAAX,EAA6C;IAAtB,MAAAS,MAAA,GAAAC,EAAU,KAAVE,SAAU,GAAV,CAAU,GAAVF,EAAU;IACjF,MAAA,EAAAG,UAAAA,EAAA,8JAAoCN,GAAG,EAAEC,MAAM,EAAEF,OAAO,EAAEG,MAAM,CAAC;IAAC,IAAAK,EAAA;IAAA,IAAAb,CAAA,CAAA,EAAA,KAAAG,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAMvDS,EAAA,GAAA;YAAAC,QAAA,EACK,UAAU;YAAAC,IAAA,EACd,CAAC;YAAAC,KAAA,EACA,CAAC;YAAAC,MAAA,EACA,IAAI;YAAAC,aAAA,EACG,MAAM;YAAAC,SAAA,EACV,QAAQ;YAAAC,OAAA,EACV;QACX,CAAC;QAAApB,CAAA,CAAA,EAAA,GAAAa,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAb,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAqB,EAAA;IAAA,IAAArB,CAAA,CAAA,EAAA,KAAAY,UAAA,EAAA;QAEAS,EAAA,GAAAT,UAcA,kBAbC,6LAAA,GAYE;YAXO,KASN,CATM,CAAA;gBAAAU,OAAA,EACI,cAAc;gBAAAC,UAAA,EACX,iBAAiB;gBAAAC,KAAA,EACtB,MAAM;gBAAAJ,OAAA,EACJ,UAAU;gBAAAK,YAAA,EACL,CAAC;gBAAAC,UAAA,EACH,UAAU;gBAAAC,UAAA,EACV,GAAG;gBAAAC,QAAA,EACL;YACZ,EAAC;YACwB,uBAA4C,CAA5C,CAAA;gBAAAC,MAAA,MAAUlC,0KAAoB,EAACiB,UAAU;YAAE,EAAC,GAExE;;;;;;QAAAZ,CAAA,CAAA,EAAA,GAAAY,UAAA;QAAAZ,CAAA,CAAA,EAAA,GAAAqB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAArB,CAAA,CAAA,EAAA;IAAA;IAAA,IAAA8B,EAAA;IAAA,IAAA9B,CAAA,CAAA,EAAA,KAAAU,SAAA,IAAAV,CAAA,CAAA,EAAA,KAAAqB,EAAA,EAAA;QA3BHS,EAAA,iBAAA,6LAAA,GA4BM;YA3BM,SAAQ,IAAR,QAAQ;YACPpB,SAAS,CAATA,CAAAA,SAAQ,CAAC;YACb,KAQN,CARM,CAAAG,EAQP,CAAC,CAEA;sBAAAQ,EAcD,CACF,EA5BA,GA4BM;;;;;;QAAArB,CAAA,CAAA,EAAA,GAAAU,SAAA;QAAAV,CAAA,CAAA,EAAA,GAAAqB,EAAA;QAAArB,CAAA,CAAA,EAAA,GAAA8B,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAA9B,CAAA,CAAA,EAAA;IAAA;IAAA,OA5BN8B,EA4BM;AAAA,CAET;;;QAjCwBlC,qJAAY;;;KADxBC,QAAQ,EAAEJ,KAAK,CAACK,EAAE,CAACJ,aAAa,CAAC","ignoreList":[]}}]
}